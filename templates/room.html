{% extends 'base.html' %}
{% block content%}


<h2>Room: 4343</h2>
<div class="table">

    <div class="board-1 board">
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
    </div>

    <div class="board-2 board">
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
    </div>


</div>


<script type="text/javascript">
    var socketio = io();

    const messages = document.getElementById("messages")

    const createMessage = (name, msg) => {
        const content = 
        // injecting only the top part of board (opp's board)
        `
        <span>X</span>
        `;
        messages.innerHTML += content;
    };

    socketio.on("message", (data) => {   // recieve from server
        createMessage(data.name, data.message);
    });

    const sendMessage = () =>{
        const message = document.getElementById("message");
        if (message.value == "") return;

        socketio.emit("message", { data: message.value }); // send to server 
        message.value = "";

    };
</script>

{% for msg in messages %}
    <script type="text/javascript">
        createMessage("{{msg.name}}", "{{msg.message}}");
    </script>
{% endfor %}
{% endblock %}